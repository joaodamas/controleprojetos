<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AXON - Projects</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <link rel="stylesheet" href="styles.css?v=20260101-1">
</head>
<body>
    <div id="login-screen" class="login-screen">
    <div class="login-card" id="login-card" data-mode="login">
      <div class="login-brand">
        <img src="logo_modal.png" alt="AXON - Projects" class="login-logo">
      </div>

      <form id="login-form" class="login-form">
        <div class="login-header">
          <h1 class="login-title" id="login-title">Entrar</h1>
          <p class="login-subtitle">Acesse seu dashboard</p>
        </div>

        <label class="login-label signup-only" for="login-name">Nome completo</label>
        <input id="login-name" type="text" class="login-input signup-only" placeholder="Seu nome" autocomplete="name">

        <label class="login-label" for="login-email">E-mail</label>
        <input id="login-email" type="email" class="login-input" placeholder="seu@email.com" required autocomplete="username">

        <label class="login-label" for="login-password">Senha</label>
        <input id="login-password" type="password" class="login-input" placeholder="Sua senha" required autocomplete="current-password">

        <label class="login-label signup-only" for="login-password-confirm">Confirmar senha</label>
        <input id="login-password-confirm" type="password" class="login-input signup-only" placeholder="Repita sua senha" autocomplete="new-password">

        <button class="login-button" id="login-submit" type="submit">Entrar</button>

        <div class="login-divider">ou</div>

        <button class="login-button google" id="login-google" type="button">Entrar com Google</button>

        <p id="login-error" class="login-error hidden"></p>
      </form>

      <div class="login-switch">
        <span id="login-switch-text">Nao tem conta?</span>
        <button type="button" class="login-link" id="login-switch-btn">Criar conta</button>
      </div>

      <div class="login-footer">(c) 2025 - AXON - Projects</div>
    </div>
  </div>

  <div id="app-shell" class="app-shell hidden">
    <aside class="sidebar">
      <div class="brand">
        <img class="brand-logo" src="axon-projects.jpg" alt="AXON - Projects">
      </div>
      <nav class="nav">
        <button class="nav-link active" data-section="inicio">Inicio</button>
        <button class="nav-link" data-section="dashboard">Dashboard Projetos</button>
        <button class="nav-link" data-section="monitor">Monitor de Atividades</button>
        <button class="nav-link hidden" data-section="dev-board" id="nav-dev-board">Painel Desenvolvedor</button>
        <div class="nav-group">
          <button class="nav-link with-caret" data-section="meus-projetos">
            Meus Projetos
            <span class="caret">›</span>
          </button>
          <div class="nav-sub" id="client-list"></div>
        </div>
      </nav>
      <div class="footer-links">
        <button class="nav-link ghost" data-section="config">Configuracoes</button>
        <button class="nav-link ghost" data-section="sair" id="nav-logout">Encerrar</button>
      </div>
    </aside>

    <div class="main">
      <header class="topbar">
        <nav class="crumbs" aria-label="breadcrumb">
          <button type="button" class="crumb-link" data-crumb="home">Home</button>
          <span class="crumb-sep">/</span>
          <span id="crumb-path" class="crumb-current">Inicio</span>
        </nav>
        <div class="top-actions">
          <button class="btn" data-section="relatorio">Gerar Relatório</button>
          <button class="btn ghost" id="open-gantt-btn" type="button">Gerar GANTT</button>
          <button class="btn ghost" id="open-employee-modal">Cadastrar Funcionarios</button>
          <button class="btn ghost" id="edit-project-btn">Editar Projeto</button>
          <button class="btn primary" id="open-project-modal">+ Adicionar Projeto</button>
          <div class="user">
            <div class="user-name">Administrador</div>
            <div class="user-avatar">AL</div>
          </div>
        </div>
      </header>

      <section class="content" id="content-area">
        <div class="grid" id="dashboard-panels">
          <!-- Cards preenchidos via JS -->
        </div>
      </section>
    </div>

  <div class="modal" id="project-modal">
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>Novo Projeto</h2>
        <button class="icon-btn" data-close-modal>&times;</button>
      </div>
      <form id="project-form" class="form">
        <label>
          Nome do Projeto
          <input type="text" name="name" required placeholder="Ex.: Armazem Industrial">
        </label>
        <label>
          Cliente
          <select name="client" id="project-client-select" required></select>
        </label>
        <label>
          Responsavel
          <input type="text" name="developer" required placeholder="Responsavel pelo projeto">
        </label>
        <div class="form-grid">
          <label>
            Data inicio
            <input type="date" name="start" required>
          </label>
          <label>
            Go Live previsto
            <input type="date" name="end" required>
          </label>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn ghost danger hidden" id="delete-project-btn">Excluir Projeto</button>
          <button type="button" class="btn ghost" data-close-modal>Cancelar</button>
          <button type="submit" class="btn primary">Salvar Projeto</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal" id="employee-modal">
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>Cadastrar Funcionario</h2>
        <button class="icon-btn" data-close-modal>&times;</button>
      </div>
      <form id="employee-form" class="form">
        <label>
          Nome completo
          <input type="text" name="name" required placeholder="Ex.: Ana Lima">
        </label>
        <label>
          Cargo / Funcao
          <input type="text" name="role" required placeholder="Gestor de Projetos">
        </label>
        <label>
          E-mail
          <input type="email" name="email" required placeholder="ana@empresa.com">
        </label>
        <div class="modal-actions">
          <button type="button" class="btn ghost" data-close-modal>Cancelar</button>
          <button type="submit" class="btn primary">Salvar Funcionario</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal" id="client-modal">
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>Editar Cliente</h2>
        <button class="icon-btn" data-close-modal>&times;</button>
      </div>
      <form id="client-form" class="form">
        <label>
          Nome do cliente
          <input type="text" name="name" required placeholder="Ex.: ACME">
        </label>
        <div class="modal-actions">
          <button type="button" class="btn ghost danger" id="delete-client-btn">Excluir Cliente</button>
          <button type="button" class="btn ghost" data-close-modal>Cancelar</button>
          <button type="submit" class="btn primary">Salvar Cliente</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal" id="activity-modal">
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>Nova Atividade</h2>
        <button class="icon-btn" data-close-modal>&times;</button>
      </div>
      <form id="activity-form" class="form">
        <label>
          Projeto atual
          <input type="text" id="activity-project" disabled>
        </label>
        <label>
          Titulo da atividade
          <input type="text" name="title" required placeholder="Ex.: Integracao com WMS">
        </label>
        <label>
          Epico
          <select name="phase" id="activity-phase-select" required>
            <option value="LEVANTAMENTO">LEVANTAMENTO</option>
            <option value="DESENVOLVIMENTO">DESENVOLVIMENTO</option>
            <option value="TESTES">TESTES</option>
            <option value="DEPLOY">DEPLOY</option>
          </select>
        </label>
        <label id="activity-package-field" class="hidden">
          Pacote (opcional)
          <select name="package" id="activity-package-select"></select>
        </label>
        <label>
          Data inicio
          <input type="date" name="start">
        </label>
        <label>
          Data fim
          <input type="date" name="due" required>
        </label>
        <label>
          Percentual (%)
          <input type="number" name="progress" min="0" max="100" step="1" placeholder="0">
        </label>
        <label>
          Status
          <select name="status" required>
            <option value="planejado" selected>Nao iniciado</option>
            <option value="em_andamento">Em andamento</option>
            <option value="em_validacao">Em validacao</option>
            <option value="parado">Parado</option>
            <option value="concluido">Concluido</option>
          </select>
        </label>
        <div class="modal-actions">
          <button type="button" class="btn ghost" data-close-modal>Cancelar</button>
          <button type="submit" class="btn primary">Salvar Atividade</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal gantt-modal" id="gantt-modal" aria-hidden="true">
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-content gantt-content">
      <div class="gantt-header">
        <div>
          <h2 id="gantt-title">Cronograma do Projeto</h2>
          <p id="gantt-subtitle">Visualização por Épicos e Dependências</p>
        </div>
        <div class="gantt-header-actions">
          <div class="gantt-legend">
            <span><span class="dot ok"></span>Concluido</span>
            <span><span class="dot done"></span>Em andamento</span>
            <span><span class="dot late"></span>Em atraso</span>
          </div>
          <button class="icon-btn" data-close-modal>&times;</button>
        </div>
      </div>

      <div class="gantt-body">
        <div id="gantt-content"></div>
      </div>

      <div class="gantt-footer">
        <div id="gantt-footer-left">Dica: as barras seguem as datas de inicio e fim das atividades.</div>
        <div id="gantt-footer-right"></div>
      </div>
    </div>
  </div>

  <div class="modal" id="monitor-task-modal">
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>Editar Atividade</h2>
        <button class="icon-btn" data-close-modal>&times;</button>
      </div>
      <form class="form" id="monitor-task-form">
        <label>
          Nome da Atividade
          <input type="text" id="monitor-task-name" name="name" required>
        </label>
        <div class="form-grid">
          <label>
            Prazo
            <input type="date" id="monitor-task-due" name="due">
          </label>
          <label>
            Responsavel
            <select id="monitor-task-responsible" name="responsible"></select>
          </label>
        </div>
      </form>
      <div class="modal-actions">
        <button type="button" class="btn ghost" data-close-modal>Cancelar</button>
        <button type="submit" class="btn primary" form="monitor-task-form">Salvar Alteracoes</button>
      </div>
    </div>
  </div>

  <div class="status-popover" id="status-popover">
    <select id="status-select"></select>
  </div>

  <div class="progress-popover" id="progress-popover">
    <input type="number" id="progress-input" min="0" max="100" step="1">
    <button type="button" class="btn sm primary" id="progress-save-btn">Salvar</button>
  </div>

  <div class="task-actions-popover" id="task-actions-popover">
    <button class="action-item" id="task-edit-action">Editar</button>
    <button class="action-item danger" id="task-delete-action">Excluir</button>
  </div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pptxgenjs@3.12.0/dist/pptxgen.bundle.js"></script>
  <script src="./app.js?v=20260101-2" defer></script>
</body>
</html>
